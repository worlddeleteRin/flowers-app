import 'package:flutter/material.dart';
import 'package:myapp/src/blocs/user_bloc.dart';
import 'package:myapp/src/models/user_model.dart';
import 'package:myapp/src/ui/components/common/SelectableListTile.dart';
import 'package:myapp/src/ui/components/common/SimpleMenuTile.dart';
import 'package:myapp/src/ui/components/common/TitleBig.dart';

class UserAccountPage extends StatelessWidget {
  final User user;
  UserAccountPage({
    required this.user
  });

  @override
  Widget build(BuildContext context) { 
    return SafeArea(
      child: Scaffold(
        body: UserAccountPageContent(
          context: context,
        ),
      )
    );
  }

  Widget UserAccountPageContent({
    required BuildContext context,
  }) {
    return Container(
      margin: EdgeInsets.symmetric(
        horizontal: 17.0,
        vertical: 20.0,
      ),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          ProfileMainHeader(context: context),
          SizedBox(height: 30.0),
          ProfileMainMenu(context: context),
        ]
      ),
    );
  }

  Widget ProfileMainHeader({
    required BuildContext context
  }) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        TitleBig(
          title: "Мой профиль",
          fontSize: 27.0,
        ),
        SizedBox(height: 10.0),
        TitleBig(
          title: "+${user.username}",
          fontSize: 20.0,
        ),
        BonusesRow(), 
      ]
    );
  }

  Widget BonusesRow() {
    return Row(
      crossAxisAlignment: CrossAxisAlignment.center,
      children: [
        Row(
          spacing: 3.0,
          direction: Axis.horizontal,
          children: [
            Icon(
              Icons.stars,
              color: Colors.red,
            ),
            TitleBig(
              title: "${user.bonuses}",
              fontSize: 20.0,
            ),
            Text("бонусов")
          ]
        )
      ]
    );
  }

  Widget ProfileMainMenu({
    required BuildContext context,
  }) {
    return Wrap(
      direction: Axis.horizontal,
      spacing: 10.0,
      runSpacing: 10.0,
      children: [
        SimpleMenuTile(
          handleTap: () {},
          title: "Настройки",
        ),
        SimpleMenuTile(
          handleTap: () {},
          title: "Заказы",
        ),
        SimpleMenuTile(
          handleTap: () {},
          title: "Мои адреса",
        ),
        SimpleMenuTile(
          handleTap: () => userBloc.logoutUser(),
          title: "Выйти из аккаунта",
        ),
      ]
    );
  }

}

